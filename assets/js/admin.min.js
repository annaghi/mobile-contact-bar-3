/*!
 * Codestar WP Color Picker v1.1.0 - This is plugin for WordPress Color Picker Alpha Channel
 * Copyright 2015 Codestar <info@codestarthemes.com> - GNU GENERAL PUBLIC LICENSE (http://www.gnu.org/licenses/gpl-2.0.txt)
 */
!function($,document){"use strict";"undefined"!=typeof Color.fn.toString&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var hex=parseInt(this._color,10).toString(16);if(this.error)return"";if(hex.length<6)for(var i=6-hex.length-1;0<=i;i--)hex="0"+hex;return"#"+hex}),$.cs_ParseColorValue=function(val){var value=val.replace(/\s+/g,""),alpha=-1!==value.indexOf("rgba")?parseFloat(100*value.replace(/^.*,(.+)\)/,"$1")):100;return{value:value,alpha:alpha,rgba:alpha<100}},$.fn.cs_wpColorPicker=function(){return this.each(function(){var $this=$(this);if(!1!==$this.data("rgba")){var picker=$.cs_ParseColorValue($this.val());$this.wpColorPicker({clear:function(){$this.trigger("keyup")},change:function(event,ui){var uiColorValue=ui.color.toString();$this.closest(".wp-picker-container").find(".cs-alpha-slider-offset").css("background-color",uiColorValue),$this.val(uiColorValue).trigger("change")},create:function(){var a8cIris=$this.data("a8cIris"),$container=$this.closest(".wp-picker-container"),$alphaWrap=$('<div class="cs-alpha-wrap"><div class="cs-alpha-slider"></div><div class="cs-alpha-slider-offset"></div><div class="cs-alpha-text"></div></div>').appendTo($container.find(".wp-picker-holder")),$alphaSlider=$alphaWrap.find(".cs-alpha-slider"),$alphaText=$alphaWrap.find(".cs-alpha-text"),$alphaOffset=$alphaWrap.find(".cs-alpha-slider-offset");$alphaSlider.slider({slide:function(event,ui){var slideValue=parseFloat(ui.value/100);a8cIris._color._alpha=slideValue,$this.wpColorPicker("color",a8cIris._color.toString()),$alphaText.text(slideValue<1?slideValue:"")},create:function(){var slideValue=parseFloat(picker.alpha/100),alphaTextValue=slideValue<1?slideValue:"";$alphaText.text(alphaTextValue),$alphaOffset.css("background-color",picker.value),$container.on("click",".wp-picker-clear",function(){a8cIris._color._alpha=1,$alphaText.text(""),$alphaSlider.slider("option","value",100).trigger("slide")}),$container.on("click",".wp-picker-default",function(){var defaultPicker=$.cs_ParseColorValue($this.data("default-color")),defaultValue=parseFloat(defaultPicker.alpha/100),defaultText=defaultValue<1?defaultValue:"";a8cIris._color._alpha=defaultValue,$alphaText.text(defaultText),$alphaSlider.slider("option","value",defaultPicker.alpha).trigger("slide")}),$container.on("click",".wp-color-result",function(){$alphaWrap.toggle()}),$("body").on("click.wpcolorpicker",function(){$alphaWrap.hide()})},value:picker.alpha,step:1,min:1,max:100})}})}else $this.wpColorPicker({clear:function(){$this.trigger("keyup")},change:function(event,ui){$this.val(ui.color.toString()).trigger("change")}})})},$(document).ready(function(){$(".cs-wp-color-picker").cs_wpColorPicker()})}(jQuery,document);!function($,document){"use strict";$.fn.addClassOdd=function(klass){return this.each(function(){$(this).removeClass(klass)}).filter(function(index){return index%2==1}).addClass(klass),this},$.fn.setId=function(id,rowType){var name,pattern="["+rowType+"][]",replacement="["+rowType+"]["+id+"]";return $(this).find("input, select, textarea").each(function(){name=$(this).attr("name"),$(this).attr("name",name.replace(pattern,replacement))}),this},$.fn.setActiveContact=function(checked){return checked?$(this).closest("tr").removeClass("mcb-odd").addClass("mcb-active"):$(this).closest("tr").removeClass("mcb-active"),this},$.fn.toggleAriaExpanded=function(){return this.attr("aria-expanded",function(index,attr){return"true"===attr?"false":"true"}),this},$.fn.initSettings=function(){var tbody=this,operators={"<":function(x,y){return Number(x)<Number(y[0])},"==":function(x,y){return x===y[0]},"!=":function(x,y){return x!==y[0]},"|==":function(x,y){return x===y[0]||x===y[1]}};return tbody.children(".mcb-child").each(function(){for(var parent,self=this,classes=self.classList,i=0;i<classes.length;i++)if(classes[i].startsWith("mcb-parent-")){var tmp=classes[i].split("--");parent=tmp[0].replace("parent","setting"),parent=tbody.children("."+parent);var match=tmp[1].match(/^([^a-zA-Z0-9]+)(.+)$/),operator=match[1],operands=match[2].split(","),value=""+parent.find("input").getValue();operators[operator](value,operands)?$(self).fadeIn(500):$(self).fadeOut(500),parent.find("input, option").on("change input",function(){value=""+$(this).getValue(),operators[operator](value,operands)?$(self).fadeIn(500):$(self).fadeOut(500)})}}),this},$.fn.sortableContacts=function(){var allParameters;return $(this).sortable({connectWith:"#mcb-table-contacts tbody",handle:".mcb-contact-icon",items:".mcb-contact",start:function(event,ui){ui.placeholder.height(ui.item.height()),(allParameters=$(this).children(".mcb-parameter")).addClass("hidden").detach(),$(this).children(".mcb-contact").each(function(){$(this).find(".mcb-row-toggle-parameters").children("i").attr("aria-expanded","false").removeClass("fa-caret-up").addClass("fa-caret-down")})},stop:function(){var contactId;$(this).children(".mcb-contact").each(function(){contactId=$(this).attr("data-contact-id"),allParameters.filter(function(i,parameter){return contactId===$(parameter).attr("data-contact-id")}).insertAfter($(this))}),allParameters=null,$(this).children(".mcb-contact").addClassOdd("mcb-odd")}}),this},$.fn.initContacts=function(){var contactId,parameter;return this.children(".mcb-contact").each(function(index){$(this).attr("data-contact-id",index)}),this.children(".mcb-parameter").each(function(index){parameter=$(this),contactId=parameter.prevAll("tr.mcb-contact").first().attr("data-contact-id"),parameter.attr("data-contact-id",contactId).attr("data-parameter-id",index).prevAll('.mcb-contact[data-contact-id="'+contactId+'"]').find(".mcb-row-toggle-parameters").removeClass("mcb-invisible")}),this.sortableContacts(),this},$.fn.getValue=function(){var value="";switch(this.attr("type")){case"number":value=this.val();break;case"checkbox":value=this.prop("checked");break;case"radio":value=this.filter(":checked").val();break;case"select":value=this.filter(":selected").val()}return value},$.fn.maxId=function(rowType){var id=-1,attr="data-"+rowType+"-id";return 0===this.length||this.each(function(){id=Math.max(id,$(this).attr(attr))}),id};var option={init:function(){option.tbody=$("#mcb-table-contacts tbody"),postboxes.add_postbox_toggles(pagenow),$(".mcb-settings tbody").each(function(){$(this).initSettings()}),option.tbody.initContacts(),option.onReady()},onReady:function(){$(".mcb-settings").on("input change",".mcb-slider-input",function(){$(this).next("span").html(this.value)}),$(".mcb-settings").on("change","#mcb-badges-corner input",function(){var corner=$("#mcb-badges-corner input:checked").val();$("#mcb-table-contacts").find(".mcb-badge").removeClass("mcb-badge-top-right mcb-badge-bottom-right mcb-badge-bottom-left mcb-badge-top-left").addClass("mcb-badge-"+corner)}),$("#mcb-table-contacts thead").on({mouseenter:function(){$(this).removeClass("wp-ui-text-highlight").addClass("wp-ui-highlight")},mouseleave:function(){$(this).removeClass("wp-ui-highlight").addClass("wp-ui-text-highlight")}},".mcb-action"),option.tbody.on("change",".mcb-contact-checkbox input",function(event){event.preventDefault(),event.stopPropagation(),$(this).setActiveContact(this.checked)}),option.tbody.on("click",".mcb-row-toggle-parameters",function(event){event.preventDefault(),event.stopPropagation();var button=$(this).children("i"),contact=button.closest("tr"),contactId=contact.attr("data-contact-id"),parameters=option.tbody.find('.mcb-parameter[data-contact-id="'+contactId+'"]');parameters.toggleClass("hidden"),button.toggleAriaExpanded().toggleClass("fa-caret-up fa-caret-down"),"true"===button.attr("aria-expanded")?parameters.first().find(".mcb-parameter-value input, .mcb-parameter-value textarea").focus():contact.find(".mcb-contact-uri input").focus()}),option.tbody.on("click",".mcb-row-delete-contact",function(event){event.preventDefault(),event.stopPropagation();var contactId=$(this).closest("tr").attr("data-contact-id");option.tbody.children('[data-contact-id="'+contactId+'"]').remove(),option.tbody.children(".mcb-contact").addClassOdd("mcb-odd")}),option.tbody.on("click",".mcb-row-delete-parameter",function(event){event.preventDefault(),event.stopPropagation();var contactId=$(this).closest("tr").attr("data-contact-id");$(this).closest("tr").remove(),0===option.tbody.find('.mcb-parameter[data-contact-id="'+contactId+'"]').length&&option.tbody.find('.mcb-contact[data-contact-id="'+contactId+'"]').find(".mcb-row-toggle-parameters").addClass("mcb-invisible").children("i").attr("aria-expanded","false").removeClass("fa-caret-up").addClass("fa-caret-down")}),option.tbody.on("click",".mcb-row-add-parameter",function(event){event.preventDefault(),event.stopPropagation();var contact=$(this).closest(".mcb-contact"),parameter=$($.parseHTML($("#mcb-tmpl-parameter").html().replace(/\s{2,}/g,""))),contactId=contact.attr("data-contact-id"),parameters=option.tbody.find('.mcb-parameter[data-contact-id="'+contactId+'"]'),parameterId=parameters.maxId("parameter")+1;contact.find(".mcb-row-toggle-parameters").removeClass("mcb-invisible").children("i").attr("aria-expanded","true").addClass("fa-caret-up").removeClass("fa-caret-down"),0===parameters.length?contact.after(parameter):(parameters.removeClass("hidden"),parameters.last().after(parameter)),parameter.attr("data-contact-id",contactId).attr("data-parameter-id",parameterId).setId(contactId,"contacts").setId(parameterId,"parameters").find(".mcb-parameter-key").focus()}),option.tbody.on("click",".mcb-row-pick-icon",function(event){var list;event.preventDefault(),event.stopPropagation(),setTimeout(function(){$("#mcb-icon-picker-container div input").focus()},100);var button=$(this),offset=button.offset(),contact=button.closest("tr").addClass("mcb-overlay");$($.parseHTML($("#mcb-tmpl-icon-picker").html().replace(/\s{2,}/g,""))).css({top:offset.top-12,left:offset.left-160}).appendTo("body").show(),list=$("#mcb-icon-picker-container ul"),$("body").off("click","#mcb-icon-picker-container ul li a").on("click","#mcb-icon-picker-container ul li a",function(event){event.preventDefault(),event.stopPropagation();var icon=$(this).children().attr("class");contact.find(".mcb-contact-icon i").removeClass().addClass(icon+" fa-lg").end().find('input[name$="[icon]"]').val(icon).end().removeClass("mcb-overlay"),$("#mcb-icon-picker-container").remove(),contact.removeClass("mcb-warning")}),$("body").off("click","#mcb-icon-picker-container div a").on("click","#mcb-icon-picker-container div a",function(event){event.preventDefault(),event.stopPropagation(),"back"===$(this).attr("data-direction")?list.find("li:gt("+(list.children().length-26)+")").prependTo(list):list.find("li:lt(30)").appendTo(list)}),$("body").off("input","#mcb-icon-picker-container div input").on("input","#mcb-icon-picker-container div input",function(event){event.preventDefault(),event.stopPropagation();var search=$(this).val();""===search?list.find("li:lt(30)").show():(list.children().not('[data-icon*="'+search+'"]').hide(),list.children('[data-icon*="'+search+'"]').show())}),$(document).off("mouseup").on("mouseup",function(event){event.preventDefault(),event.stopPropagation(),$("#mcb-icon-picker-container").is(event.target)||0!==$("#mcb-icon-picker-container").has(event.target).length||($("#mcb-icon-picker-container").remove(),contact.removeClass("mcb-overlay"))})}),$("#mcb-integration-icons .mcb-action, #mcb-integration-buttons .mcb-action").click(function(event){event.preventDefault(),event.stopPropagation();var contactType=$(this).attr("data-contact-type"),contactId=option.tbody.children(".mcb-contact").maxId("contact")+1,thead=$("#mcb-table-contacts thead");$.ajax({url:ajaxurl,method:"POST",data:{action:"ajax_add_contact",nonce:mobile_contact_bar.nonce,contact_type:contactType},beforeSend:function(){var position=thead.position(),overlay=$("<tr>",{class:"mcb-overlay"});overlay.css({position:"absolute",top:position.top,left:position.left,height:thead.height(),width:thead.width()}),thead.prepend(overlay)}}).done(function(response){if(!response)return!1;var data=JSON.parse(response);if(!data.hasOwnProperty("contact"))return!1;var contact=$($.parseHTML(data.contact)[0]);if(contact.attr("data-contact-id",contactId).setId(contactId,"contacts"),option.tbody.prepend(contact),option.tbody.sortableContacts().children(".mcb-contact").addClassOdd("mcb-odd"),data.hasOwnProperty("parameters")){var parameter;contact.find(".mcb-row-add-parameter").addClass("mcb-invisible").end().find(".mcb-row-toggle-parameters").removeClass("mcb-invisible").children("i").attr("aria-expanded","false").removeClass("fa-caret-up").addClass("fa-caret-down");for(var i=data.parameters.length-1;-1<i;i--)(parameter=$(data.parameters[i])).attr("data-contact-id",contactId).attr("data-parameter-id",i).setId(contactId,"contacts").setId(i,"parameters"),contact.after(parameter)}}).always(function(){thead.find(".mcb-overlay").remove()})})}};$(document).ready(option.init)}(jQuery,document);!function($,document){"use strict";var model={init:function(){var h=$("#mcb-bar-height").val(),w=$("#mcb-bar-width").val();h=0<h?h/2:0,w=0<w?2.6*w:0,$("#mcb-model-bar").attr("fill",$("#mcb-bar-color").val()),$("#mcb-model-bar").attr("fill-opacity",$("#mcb-bar-opacity").val()),$("#mcb-model-bar").attr("height",h),$("#mcb-model-bar").attr("width",w),$("#mcb-model-border-top").attr("width",w),$("#mcb-model-border-bottom").attr("width",w),$("#mcb-model-border-top").attr("fill",$("#mcb-bar-border_color").val()),$("#mcb-model-border-bottom").attr("fill",$("#mcb-bar-border_color").val()),$("#mcb-model-space").attr("height",0<$("#mcb-bar-space_height").val()?$("#mcb-bar-space_height").val()/2:0),$("#mcb-model-placeholder").attr("fill",$("#mcb-bar-placeholder_color").val()),$("#mcb-model-placeholder").attr("height",0<$("#mcb-bar-placeholder_height").val()?$("#mcb-bar-placeholder_height").val()/2:0),model.update_bar_group_x(),model.update_bar_group_y(),model.update_placeholder_y(),model.update_borders_height(),model.update_border_bottom_y(),model.onReady()},onReady:function(){model.max={canvas:690,mobile:315},model.min={canvas:25,mobile:55},model.dragvars={active:!1,dmy:0,dby:0,dt:0,db:0},$("#mcb-model-mobile-draggable").mousedown(function(event){event.preventDefault(),event.stopPropagation();var bgt,mgt=$("#mcb-model-mobile-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/),vp=$("#mcb-bar-vertical_position input:checked").val(),f=$("#mcb-bar-is_fixed").prop("checked"),ph=$("#mcb-model-placeholder").attr("height");model.dragvars.active=!0,model.dragvars.dmy=event.clientY-mgt[2],f&&(bgt=$("#mcb-model-bar-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/),model.dragvars.dby=event.clientY-bgt[2]),"top"===vp?(model.dragvars.dt=-ph,model.dragvars.db=0):"bottom"===vp&&(model.dragvars.dt=0,model.dragvars.db=-ph)}).mousemove(function(event){event.preventDefault(),event.stopPropagation();var y=event.clientY-model.dragvars.dmy;if(model.dragvars.active&&model.min.mobile+model.dragvars.dt<=y&&y<=model.max.mobile-model.dragvars.db){var mgt=$("#mcb-model-mobile-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/),bgt=$("#mcb-model-bar-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/);$("#mcb-bar-is_fixed").prop("checked")&&$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(event.clientY-model.dragvars.dby)+")"),$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+y+")")}}).mouseup(function(event){event.preventDefault(),event.stopPropagation(),model.dragvars.active=!1}).mouseleave(function(event){event.preventDefault(),event.stopPropagation(),model.dragvars.active=!1}),$("#mcb-bar-color").on("input change",function(){$("#mcb-model-bar").attr("fill",this.value)}),$("#mcb-bar-opacity").on("input change",function(){$("#mcb-model-bar").attr("fill-opacity",this.value)}),$("#mcb-bar-placeholder_color").on("input change",function(){$("#mcb-model-placeholder").attr("fill",this.value)}),$("#mcb-bar-border_color").on("input change",function(){$("#mcb-model-border-top").attr("fill",this.value),$("#mcb-model-border-bottom").attr("fill",this.value)}),$("#mcb-bar-height").on("input",function(){$("#mcb-model-bar").attr("height",0<this.value?this.value/2:0),model.update_bar_group_y(),model.update_border_bottom_y()}),$("#mcb-bar-placeholder_height").on("input",function(){$("#mcb-model-placeholder").attr("height",0<this.value?this.value/2:0),model.update_placeholder_y(),model.update_bar_group_y(),model.update_mobile_group_y()}),$("#mcb-bar-space_height").on("input",model.update_bar_group_y),$("#mcb-bar-border_width").on("input",function(){model.update_borders_height(),model.update_border_bottom_y()}),$("#mcb-bar-width").on("input",function(){var w=0<this.value?2.6*this.value:0;$("#mcb-model-bar").attr("width",w),$("#mcb-model-border-top").attr("width",w),$("#mcb-model-border-bottom").attr("width",w),model.update_bar_group_x()}),$("#mcb-bar-is_fixed").on("change",model.update_bar_group_y),$("#mcb-bar-horizontal_position input").on("change",model.update_bar_group_x),$("#mcb-bar-vertical_position input").on("change",function(){var mgt=$("#mcb-model-mobile-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/);mgt[2]<model.min.mobile?(mgt[2]=model.min.mobile,$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+mgt[2]+")")):mgt[2]>model.max.mobile&&(mgt[2]=model.max.mobile,$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+mgt[2]+")")),model.update_placeholder_y(),model.update_bar_group_y(),model.update_mobile_group_y(),model.update_borders_height()}),$("#mcb-bar-is_border input").on("change",model.update_borders_height)},update_bar_group_x:function(){var hp=$("#mcb-bar-horizontal_position input:checked").val(),w=$("#mcb-model-bar").attr("width"),bgt=$("#mcb-model-bar-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/);"left"===hp?$("#mcb-model-bar-group").attr("transform","translate(25,"+bgt[2]+")"):"center"===hp?$("#mcb-model-bar-group").attr("transform","translate("+((260-w)/2+25)+","+bgt[2]+")"):"right"===hp&&$("#mcb-model-bar-group").attr("transform","translate("+(260-w+25)+","+bgt[2]+")")},update_bar_group_y:function(){var mgt,vp=$("#mcb-bar-vertical_position input:checked").val(),f=$("#mcb-bar-is_fixed").prop("checked"),h=$("#mcb-model-bar").attr("height"),sh=0<$("#mcb-bar-space_height").val()?$("#mcb-bar-space_height").val()/2:0,ph=$("#mcb-model-placeholder").attr("height"),bgt=$("#mcb-model-bar-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/);f?(mgt=$("#mcb-model-mobile-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/),"top"===vp?$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(+mgt[2]+25+sh)+")"):"bottom"===vp&&$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(+mgt[2]+375-sh-h)+")")):"top"===vp?$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(80-ph+sh)+")"):"bottom"===vp&&$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(+ph+690-sh-h)+")")},update_mobile_group_y:function(){var vp=$("#mcb-bar-vertical_position input:checked").val(),f=$("#mcb-bar-is_fixed").prop("checked"),h=$("#mcb-model-bar").attr("height"),sh=0<$("#mcb-bar-space_height").val()?$("#mcb-bar-space_height").val()/2:0,ph=$("#mcb-model-placeholder").attr("height"),mgt=$("#mcb-model-mobile-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/),bgt=$("#mcb-model-bar-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/);"top"===vp&&mgt[2]<model.min.mobile?(mgt[2]=model.min.mobile,$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+(mgt[2]-ph)+")"),f&&(bgt[2]=80+sh,$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(bgt[2]-ph)+")"))):"bottom"===vp&&mgt[2]>model.max.mobile&&(mgt[2]=model.max.mobile,$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+(mgt[2]+ +ph)+")"),f&&(bgt[2]=690-h-sh,$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(bgt[2]+ +ph)+")")))},update_placeholder_y:function(){var ph,vp=$("#mcb-bar-vertical_position input:checked").val();"top"===vp?(ph=$("#mcb-model-placeholder").attr("height"),$("#mcb-model-placeholder").attr("y",80-ph)):"bottom"===vp&&$("#mcb-model-placeholder").attr("y",690)},update_border_bottom_y:function(){var h=$("#mcb-model-bar").attr("height"),bbh=$("#mcb-model-border-bottom").attr("height");$("#mcb-model-border-bottom").attr("y",h-bbh)},update_borders_height:function(){var b=$("#mcb-bar-is_border input:checked").val(),vp=$("#mcb-bar-vertical_position input:checked").val(),bw=0<$("#mcb-bar-border_width").val()?$("#mcb-bar-border_width").val()/2:0;"one"===b?"top"===vp?($("#mcb-model-border-top").attr("height",0),$("#mcb-model-border-bottom").attr("height",bw)):"bottom"===vp&&($("#mcb-model-border-top").attr("height",bw),$("#mcb-model-border-bottom").attr("height",0)):"two"===b?($("#mcb-model-border-bottom").attr("height",bw),$("#mcb-model-border-top").attr("height",bw)):($("#mcb-model-border-top").attr("height",0),$("#mcb-model-border-bottom").attr("height",0))}};$(document).ready(model.init)}(jQuery,document);
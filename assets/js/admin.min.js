/*!
 * Mobile Contact Bar 3.0.0 by Anna Bansaghi - http://mobilecontactbar.com
 * License GPL-2.0 - https://www.gnu.org/licenses/gpl-2.0.en.html
 */
!function($,window,document){"use strict";$.fn.toggleAriaExpanded=function(){return this.attr("aria-expanded",function(index,attr){return"true"==attr?"false":"true"}),this},$.fn.initSettings=function(){var tbody=this,operators={"<":function(x,y){return Number(x)<Number(y)},"==":function(x,y){return x==y},"!=":function(x,y){return x!=y}};return tbody.children(".mcb-child").each(function(){var operand="."+$(this).classList().find(function(klass){return klass.startsWith("mcb-parent-")}),parent=tbody.children(".mcb-parent"+operand),value=parent.classList().find(function(klass){return klass.startsWith("mcb-trigger-")}).match(/^mcb-trigger-([<=!]+)(.*)$/),operator=value[1],operand=value[2]||"",value="";"true"===operand||!0===operand?(value=parent.find("input").toArray().reduce((acc,inputEl)=>acc||$(inputEl).getValue(),!1),operand=!0):value=""+parent.find("input").getValue(),operators[operator](value,operand)?$(this).fadeIn(500):$(this).fadeOut(500)}),tbody.children(".mcb-parent").each(function(){var self=$(this),match="."+self.classList().find(function(klass){return klass.startsWith("mcb-parent-")}),children=tbody.children(".mcb-child"+match),match=self.classList().find(function(klass){return klass.startsWith("mcb-trigger-")}).match(/^mcb-trigger-([<=!]+)(.*)$/),operator=match[1],operand=match[2]||"",value="";self.find("input, option").on("change input",function(){"true"===operand||!0===operand?(value=self.find("input").toArray().reduce((acc,inputEl)=>acc||$(inputEl).getValue(),$(this).getValue()),operand=!0):value=""+$(this).getValue(),operators[operator](value,operand)?children.each(function(){$(this).fadeIn(500)}):children.each(function(){$(this).fadeOut(500)})})}),this},$.fn.initSortableContacts=function(){return $(this).sortable({connectWith:"#mcb-contacts",handle:".mcb-sortable-draggable",items:".mcb-contact",start:function(event,ui){document.activeElement.blur(),$(this).find(".mcb-contact").removeClass("mcb-opened").end().find(".mcb-action-toggle-details").attr("aria-expanded","false"),ui.placeholder.height(ui.item.children(".mcb-summary").outerHeight()),ui.helper.height(ui.item.children(".mcb-summary").outerHeight()),ui.placeholder.css("visibility","visible"),$(this).sortable("refresh","refreshPositions")}}),this},$.fn.getValue=function(){var value="";switch(this.attr("type")){case"text":case"number":value=this.val();break;case"checkbox":value=this.prop("checked");break;case"radio":value=this.filter(":checked").val();break;case"select":value=this.filter(":selected").val()}return value},$.fn.classList=function(){return this[0].className.split(/\s+/)},$.fn.maxId=function(rowType){var id=-1,attr="data-"+rowType+"-id";return 0===this.length||this.each(function(){id=Math.max(id,$(this).attr(attr))}),id};var option={init:function(){postboxes.add_postbox_toggles(pagenow),$("#mcb-table-bar tbody, #mcb-table-icons_labels tbody, #mcb-table-toggle tbody").initSettings(),option.contactList=$("#mcb-contacts"),option.contactList.initSortableContacts(),option.onReady()},onReady:function(){$(".mcb-settings").on("input change",".mcb-slider-input",function(){$(this).next("span").html(this.value+" "+$(this).data("postfix"))}),option.contactList.on("change",".mcb-summary-checkbox input",function(event){event.preventDefault(),event.stopPropagation(),this.checked?$(this).closest(".mcb-summary").addClass("mcb-checked"):$(this).closest(".mcb-summary").removeClass("mcb-checked")}),$("#mcb-add-contact").click(function(event){event.preventDefault(),event.stopPropagation();var contactId=option.contactList.children(".mcb-contact").maxId("contact")+1;$.ajax({url:ajaxurl,method:"POST",data:{action:"mcb_ajax_get_contact",nonce:mobile_contact_bar.nonce,contact_id:contactId}}).done(function(contact){if(!contact)return!1;var data=JSON.parse(contact);if(!data.hasOwnProperty("summary")||!data.hasOwnProperty("details"))return!1;contact=document.createElement("div");$(contact).addClass("mcb-contact"),$(contact).attr("data-contact-id",contactId),$(contact).append($(data.summary)).append($(data.details)),$(contact).find(".color-picker").wpColorPicker(),$(contact).addClass("mcb-opened").find(".mcb-action-toggle-details").attr("aria-expanded","true"),option.contactList.append(contact)})}),option.contactList.on("click",".mcb-action-delete-contact",function(event){event.preventDefault(),event.stopPropagation(),$(this).closest(".mcb-contact").remove()}),option.contactList.on("click",".mcb-action-toggle-details",function(event){event.preventDefault(),event.stopPropagation(),$(this).toggleAriaExpanded().closest(".mcb-contact").toggleClass("mcb-opened")}),option.contactList.on("click",".mcb-action-order-higher",function(contact){contact.preventDefault(),contact.stopPropagation();var focused=document.activeElement,prev=$(this).closest(".mcb-contact").prev(),contact=$(this).closest(".mcb-contact").detach();prev.before(contact),focused.focus()}),option.contactList.on("click",".mcb-action-order-lower",function(contact){contact.preventDefault(),contact.stopPropagation();var focused=document.activeElement,next=$(this).closest(".mcb-contact").next(),contact=$(this).closest(".mcb-contact").detach();next.after(contact),focused.focus()}),option.contactList.on("change",".mcb-details-type select",function(contactId){contactId.preventDefault(),contactId.stopPropagation();var contact=$(this).closest(".mcb-contact"),contactId=contact.attr("data-contact-id");$.ajax({url:ajaxurl,method:"POST",data:{action:"mcb_ajax_get_contact_type",nonce:mobile_contact_bar.nonce,contact_id:contactId,contact_type:$(this).val()}}).done(function(data){if(!data)return!1;data=JSON.parse(data);if(!data.hasOwnProperty("contact_type")||!data.hasOwnProperty("uri")||!data.hasOwnProperty("parameters"))return!1;contact.find(".mcb-details-uri").replaceWith($(data.uri)),contact.find(".mcb-builtin-parameters, .mcb-custom-parameters, .mcb-builtin-parameter, .mcb-custom-parameter").detach(),contact.find(".mcb-details-uri").after($(data.parameters)),contact.find(".mcb-details-type .mcb-description").text(data.contact_type.desc_type)})}),option.contactList.on("click",".mcb-action-pick-icon",function(event){event.preventDefault(),event.stopPropagation(),setTimeout(function(){$("#mcb-icon-picker-container div input").focus()},100);var iconList,searchTerm="",offset=$(this).offset(),contact=$(this).closest(".mcb-contact");function update_picker_page2(path,icons,firstIconIndex){var icon;iconList.children().each(function(index){void 0===(icon=icons[firstIconIndex+index])?$(this).css({display:"none"}):($(this).css({display:"inline-block"}),$(this).attr("data-icon",icon),$(this).find("a").prop("title",icon),$(this).find("use").attr("xlink:href",path+"#tabler-"+icon))})}function filtered_ti_icons(searchTerm){return""===searchTerm?mobile_contact_bar.ti_icons:mobile_contact_bar.ti_icons.filter(function(icon){return icon.includes(searchTerm)})}$($.parseHTML($("#mcb-tmpl-icon-picker").html().replace(/\s{2,}/g,""))).css({top:offset.top-15,left:offset.left}).appendTo("body").show(),iconList=$("#mcb-icon-picker-container ul"),$("body").off("click","#mcb-icon-picker-container button").on("click","#mcb-icon-picker-container button",function(event){event.preventDefault(),event.stopPropagation(),$("#mcb-icon-picker-container").find("button").removeClass("mcb-icon-brand-active"),$(this).addClass("mcb-icon-brand-active"),"ti"===$(this).attr("data-brand")&&update_picker_page2(mobile_contact_bar.page_url+"assets/icons/ti/tabler-sprite.svg",filtered_ti_icons(searchTerm),0)}),$("body").off("click","#mcb-icon-picker-container ul li a").on("click","#mcb-icon-picker-container ul li a",function(event){event.preventDefault(),event.stopPropagation();var brand=$("#mcb-icon-picker-container").find("button.mcb-icon-brand-active").attr("data-brand"),icon=$(this).prop("title");"ti"===brand&&$.ajax({url:ajaxurl,method:"POST",data:{action:"mcb_ajax_get_icon",nonce:mobile_contact_bar.nonce,brand:brand,icon:icon}}).done(function(svg){if(!svg)return!1;svg=JSON.parse(svg);if(svg.length<=0)return!1;contact.find('input[name$="[brand]"]').val(brand).end().find('input[name$="[icon]"]').val(icon).end().find(".mcb-summary-icon").removeClass("mcb-blank-icon, mcb-fa").empty().append(svg).end().find(".mcb-details-icon span").removeClass("mcb-blank-icon, mcb-fa").empty().append(svg)}),$("#mcb-icon-picker-container").remove()}),$("body").off("click","#mcb-icon-picker-container div a").on("click","#mcb-icon-picker-container div a",function(icons){var path;icons.preventDefault(),icons.stopPropagation(),"ti"===$("#mcb-icon-picker-container").find("button.mcb-icon-brand-active").attr("data-brand")&&(path=mobile_contact_bar.page_url+"assets/icons/ti/tabler-sprite.svg",icons=filtered_ti_icons(searchTerm),("back"===$(this).attr("data-direction")?function(path,icons){var firstIconIndex=iconList.children().first().attr("data-icon"),firstIconIndex=icons.indexOf(firstIconIndex)-30;update_picker_page2(path,icons,firstIconIndex=firstIconIndex<0?icons.length+firstIconIndex:firstIconIndex)}:function(path,icons){var firstIconIndex=iconList.children().last().attr("data-icon"),firstIconIndex=icons.indexOf(firstIconIndex)+1;update_picker_page2(path,icons,firstIconIndex=firstIconIndex===icons.length?0:firstIconIndex)})(path,icons))}),$("body").off("input","#mcb-icon-picker-container div input").on("input","#mcb-icon-picker-container div input",function(event){event.preventDefault(),event.stopPropagation(),searchTerm=$(this).val(),"ti"===$("#mcb-icon-picker-container").find("button.mcb-icon-brand-active").attr("data-brand")&&update_picker_page2(mobile_contact_bar.page_url+"assets/icons/ti/tabler-sprite.svg",filtered_ti_icons(searchTerm),0)}),$(document).off("mouseup").on("mouseup",function(event){event.preventDefault(),event.stopPropagation(),$("#mcb-icon-picker-container").is(event.target)||0!==$("#mcb-icon-picker-container").has(event.target).length||$("#mcb-icon-picker-container").remove()}),$(window).resize(function(){$("#mcb-icon-picker-container").is(event.target)||0!==$("#mcb-icon-picker-container").has(event.target).length||$("#mcb-icon-picker-container").remove()})}),option.contactList.on("click",".mcb-action-clear-icon",function(event){event.preventDefault(),event.stopPropagation(),$(this).closest(".mcb-contact").find('input[name$="[brand]"]').val("").end().find('input[name$="[icon]"]').val("").end().find(".mcb-summary-icon").addClass("mcb-blank-icon").text("---").end().find(".mcb-details-icon span").addClass("mcb-blank-icon").text("---")}),option.contactList.on("input",".mcb-details-label input",function(event){event.preventDefault(),event.stopPropagation(),$(this).closest(".mcb-contact").find(".mcb-summary-label").text($(this).val())}),option.contactList.on("input",".mcb-details-uri input",function(event){event.preventDefault(),event.stopPropagation(),$(this).closest(".mcb-contact").find(".mcb-summary-uri").text($(this).val())}),option.contactList.on("click",".mcb-add-parameter",function(contactId){contactId.preventDefault(),contactId.stopPropagation();var contact=$(this).closest(".mcb-contact"),parameterId=contact.find(".mcb-custom-parameter"),contactId=contact.attr("data-contact-id"),parameterId=parameterId.maxId("parameter")+1;$.ajax({url:ajaxurl,method:"POST",data:{action:"mcb_ajax_get_parameter",nonce:mobile_contact_bar.nonce,contact_id:contactId,parameter_id:parameterId}}).done(function(parameter){if(!parameter)return!1;parameter=JSON.parse(parameter);if(parameter.length<=0)return!1;contact.find(".mcb-custom-parameters").after($(parameter))})}),option.contactList.on("click",".mcb-action-delete-parameter",function(event){event.preventDefault(),event.stopPropagation(),$(this).closest(".mcb-custom-parameter").remove()})}};$(document).ready(option.init)}(jQuery,window,document);!function($,document){"use strict";var model={init:function(){var h=0<(h=$("#mcb-bar-height").val())?h/2:0,w=0<(w=$("#mcb-bar-width").val())?2.6*w:0;$("#mcb-model-bar").attr("fill",$("#mcb-bar-color").val()),$("#mcb-model-bar").attr("fill-opacity",$("#mcb-bar-opacity").val()),$("#mcb-model-bar").attr("height",h),$("#mcb-model-bar").attr("width",w),$("#mcb-model-border-top").attr("width",w),$("#mcb-model-border-bottom").attr("width",w),$("#mcb-model-border-top").attr("fill",$("#mcb-bar-border_color").val()),$("#mcb-model-border-bottom").attr("fill",$("#mcb-bar-border_color").val()),$("#mcb-model-space").attr("height",0<$("#mcb-bar-space_height").val()?$("#mcb-bar-space_height").val()/2:0),$("#mcb-model-placeholder").attr("fill",$("#mcb-bar-placeholder_color").val()),$("#mcb-model-placeholder").attr("height",0<$("#mcb-bar-placeholder_height").val()?$("#mcb-bar-placeholder_height").val()/2:0),model.update_bar_group_x(),model.update_bar_group_y(),model.update_placeholder_y(),model.update_borders_height(),model.update_border_bottom_y(),model.onReady()},onReady:function(){model.max={canvas:690,mobile:315},model.min={canvas:25,mobile:55},model.dragvars={active:!1,dmy:0,dby:0,dt:0,db:0},$("#mcb-model-mobile-draggable").mousedown(function(event){event.preventDefault(),event.stopPropagation();var mgt=$("#mcb-model-mobile-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/),vp=$("#mcb-bar-vertical_alignment input:checked").val(),bgt=$("#mcb-bar-is_fixed").prop("checked"),ph=$("#mcb-model-placeholder").attr("height");model.dragvars.active=!0,model.dragvars.dmy=event.clientY-mgt[2],bgt&&(bgt=$("#mcb-model-bar-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/),model.dragvars.dby=event.clientY-bgt[2]),"top"==vp?(model.dragvars.dt=-ph,model.dragvars.db=0):"bottom"==vp&&(model.dragvars.dt=0,model.dragvars.db=-ph)}).mousemove(function(event){event.preventDefault(),event.stopPropagation();var mgt,bgt,y=event.clientY-model.dragvars.dmy;model.dragvars.active&&model.min.mobile+model.dragvars.dt<=y&&y<=model.max.mobile-model.dragvars.db&&(mgt=$("#mcb-model-mobile-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/),bgt=$("#mcb-model-bar-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/),$("#mcb-bar-is_fixed").prop("checked")&&$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(event.clientY-model.dragvars.dby)+")"),$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+y+")"))}).mouseup(function(event){event.preventDefault(),event.stopPropagation(),model.dragvars.active=!1}).mouseleave(function(event){event.preventDefault(),event.stopPropagation(),model.dragvars.active=!1}),$("#mcb-bar-color").on("input change",function(){$("#mcb-model-bar").attr("fill",this.value)}),$("#mcb-bar-opacity").on("input change",function(){$("#mcb-model-bar").attr("fill-opacity",this.value)}),$("#mcb-bar-placeholder_color").on("input change",function(){$("#mcb-model-placeholder").attr("fill",this.value)}),$("#mcb-bar-border_color").on("input change",function(){$("#mcb-model-border-top").attr("fill",this.value),$("#mcb-model-border-bottom").attr("fill",this.value)}),$("#mcb-bar-height").on("input",function(){$("#mcb-model-bar").attr("height",0<this.value?this.value/2:0),model.update_bar_group_y(),model.update_border_bottom_y()}),$("#mcb-bar-placeholder_height").on("input",function(){$("#mcb-model-placeholder").attr("height",0<this.value?this.value/2:0),model.update_placeholder_y(),model.update_bar_group_y(),model.update_mobile_group_y()}),$("#mcb-bar-space_height").on("input",model.update_bar_group_y),$("#mcb-bar-border_width").on("input",function(){model.update_borders_height(),model.update_border_bottom_y()}),$("#mcb-bar-width").on("input",function(){var w=0<this.value?2.6*this.value:0;$("#mcb-model-bar").attr("width",w),$("#mcb-model-border-top").attr("width",w),$("#mcb-model-border-bottom").attr("width",w),model.update_bar_group_x()}),$("#mcb-bar-is_fixed").on("change",model.update_bar_group_y),$("#mcb-bar-horizontal_alignment input").on("change",model.update_bar_group_x),$("#mcb-bar-vertical_alignment input").on("change",function(){var mgt=$("#mcb-model-mobile-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/);mgt[2]<model.min.mobile?(mgt[2]=model.min.mobile,$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+mgt[2]+")")):mgt[2]>model.max.mobile&&(mgt[2]=model.max.mobile,$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+mgt[2]+")")),model.update_placeholder_y(),model.update_bar_group_y(),model.update_mobile_group_y(),model.update_borders_height()}),$("#mcb-bar-is_border input").on("change",model.update_borders_height),$(".mcb-contact-checkbox").on("change",model.update_bar_items)},update_bar_group_x:function(){var hp=$("#mcb-bar-horizontal_alignment input:checked").val(),w=$("#mcb-model-bar").attr("width"),bgt=$("#mcb-model-bar-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/);"left"==hp?$("#mcb-model-bar-group").attr("transform","translate(25,"+bgt[2]+")"):"center"==hp?$("#mcb-model-bar-group").attr("transform","translate("+((260-w)/2+25)+","+bgt[2]+")"):"right"==hp&&$("#mcb-model-bar-group").attr("transform","translate("+(260-w+25)+","+bgt[2]+")")},update_bar_group_y:function(){var vp=$("#mcb-bar-vertical_alignment input:checked").val(),mgt=$("#mcb-bar-is_fixed").prop("checked"),h=$("#mcb-model-bar").attr("height"),sh=0<$("#mcb-bar-space_height").val()?$("#mcb-bar-space_height").val()/2:0,ph=$("#mcb-model-placeholder").attr("height"),bgt=$("#mcb-model-bar-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/);mgt?(mgt=$("#mcb-model-mobile-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/),"top"==vp?$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(+mgt[2]+25+sh)+")"):"bottom"==vp&&$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(+mgt[2]+375-sh-h)+")")):"top"==vp?$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(80-ph+sh)+")"):"bottom"==vp&&$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(+ph+690-sh-h)+")")},update_mobile_group_y:function(){var vp=$("#mcb-bar-vertical_alignment input:checked").val(),f=$("#mcb-bar-is_fixed").prop("checked"),h=$("#mcb-model-bar").attr("height"),sh=0<$("#mcb-bar-space_height").val()?$("#mcb-bar-space_height").val()/2:0,ph=$("#mcb-model-placeholder").attr("height"),mgt=$("#mcb-model-mobile-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/),bgt=$("#mcb-model-bar-group").attr("transform").match(/\w+\(([^,)]+),([^)]+)\)/);"top"==vp&&mgt[2]<model.min.mobile?(mgt[2]=model.min.mobile,$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+(mgt[2]-ph)+")"),f&&(bgt[2]=80+sh,$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(bgt[2]-ph)+")"))):"bottom"==vp&&mgt[2]>model.max.mobile&&(mgt[2]=model.max.mobile,$("#mcb-model-mobile-group").attr("transform","translate("+mgt[1]+","+(mgt[2]+ +ph)+")"),f&&(bgt[2]=690-h-sh,$("#mcb-model-bar-group").attr("transform","translate("+bgt[1]+","+(bgt[2]+ +ph)+")")))},update_placeholder_y:function(){var ph,vp=$("#mcb-bar-vertical_alignment input:checked").val();"top"==vp?(ph=$("#mcb-model-placeholder").attr("height"),$("#mcb-model-placeholder").attr("y",80-ph)):"bottom"==vp&&$("#mcb-model-placeholder").attr("y",690)},update_border_bottom_y:function(){var h=$("#mcb-model-bar").attr("height"),bbh=$("#mcb-model-border-bottom").attr("height");$("#mcb-model-border-bottom").attr("y",h-bbh)},update_borders_height:function(){var b=$("#mcb-bar-is_border input:checked").val(),vp=$("#mcb-bar-vertical_alignment input:checked").val(),bw=0<$("#mcb-bar-border_width").val()?$("#mcb-bar-border_width").val()/2:0;"one"==b?"top"==vp?($("#mcb-model-border-top").attr("height",0),$("#mcb-model-border-bottom").attr("height",bw)):"bottom"==vp&&($("#mcb-model-border-top").attr("height",bw),$("#mcb-model-border-bottom").attr("height",0)):"two"==b?($("#mcb-model-border-bottom").attr("height",bw),$("#mcb-model-border-top").attr("height",bw)):($("#mcb-model-border-top").attr("height",0),$("#mcb-model-border-bottom").attr("height",0))}};$(document).ready(model.init)}(jQuery,document);!function($){var backgroundImage,wpColorPickerAlpha={version:300};if("wpColorPickerAlpha"in window&&"version"in window.wpColorPickerAlpha){var version=parseInt(window.wpColorPickerAlpha.version,10);if(!isNaN(version)&&wpColorPickerAlpha.version<=version)return}Color.fn.hasOwnProperty("to_s")||(Color.fn.to_s=function(type){var color="";return"hex"===(type="hex"===(type=type||"hex")&&this._alpha<1?"rgba":type)?color=this.toString():this.error||(color=this.toCSS(type).replace(/\(\s+/,"(").replace(/\s+\)/,")")),color},window.wpColorPickerAlpha=wpColorPickerAlpha,$.widget("a8c.iris",$.a8c.iris,{alphaOptions:{alphaEnabled:!(backgroundImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAAHnlligAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNpi+P///4EDBxiAGMgCCCAGFB5AADGCRBgYDh48CCRZIJS9vT2QBAggFBkmBiSAogxFBiCAoHogAKIKAlBUYTELAiAmEtABEECk20G6BOmuIl0CIMBQ/IEMkO0myiSSraaaBhZcbkUOs0HuBwDplz5uFJ3Z4gAAAABJRU5ErkJggg==")},_getColor:function(color){return void 0===color&&(color=this._color),this.alphaOptions.alphaEnabled?(color=color.to_s(this.alphaOptions.alphaColorType),this.alphaOptions.alphaColorWithSpace?color:color.replace(/\s+/g,"")):color.toString()},_create:function(){try{this.alphaOptions=this.element.wpColorPicker("instance").alphaOptions}catch(e){}$.extend({},this.alphaOptions,{alphaEnabled:!1,alphaCustomWidth:130,alphaReset:!1,alphaColorType:"hex",alphaColorWithSpace:!1}),this._super()},_addInputListeners:function(input){function callback(event){var val=input.val(),color=new Color(val),val=val.replace(/^(#|(rgb|hsl)a?)/,""),type=self.alphaOptions.alphaColorType;input.removeClass("iris-error"),color.error?""!==val&&input.addClass("iris-error"):"hex"===type&&"keyup"===event.type&&val.match(/^[0-9a-fA-F]{3}$/)||color.toIEOctoHex()!==self._color.toIEOctoHex()&&self._setOption("color",self._getColor(color))}var self=this;input.on("change",callback).on("keyup",self._debounce(callback,100)),self.options.hide&&input.one("focus",function(){self.show()})},_initControls:function(){var self,stripAlpha,stripAlphaSlider,controls;this._super(),this.alphaOptions.alphaEnabled&&(stripAlphaSlider=(stripAlpha=(self=this).controls.strip.clone(!1,!1)).find(".iris-slider-offset"),controls={stripAlpha:stripAlpha,stripAlphaSlider:stripAlphaSlider},stripAlpha.addClass("iris-strip-alpha"),stripAlphaSlider.addClass("iris-slider-offset-alpha"),stripAlpha.appendTo(self.picker.find(".iris-picker-inner")),$.each(controls,function(k,v){self.controls[k]=v}),self.controls.stripAlphaSlider.slider({orientation:"vertical",min:0,max:100,step:1,value:parseInt(100*self._color._alpha),slide:function(event,ui){self.active="strip",self._color._alpha=parseFloat(ui.value/100),self._change.apply(self,arguments)}}))},_dimensions:function(strip){if(this._super(strip),this.alphaOptions.alphaEnabled){var opts=this.options,square=this.controls.square,strip=this.picker.find(".iris-strip"),innerWidth=Math.round(this.picker.outerWidth(!0)-(opts.border?22:0)),squareWidth=Math.round(square.outerWidth()),stripWidth=Math.round((innerWidth-squareWidth)/2),stripMargin=Math.round(stripWidth/2),totalWidth=Math.round(squareWidth+2*stripWidth+2*stripMargin);while(innerWidth<totalWidth)stripWidth=Math.round(stripWidth-2),stripMargin=Math.round(stripMargin-1),totalWidth=Math.round(squareWidth+2*stripWidth+2*stripMargin);square.css("margin","0"),strip.width(stripWidth).css("margin-left",stripMargin+"px")}},_change:function(){var controls,alpha,gradient,self=this,active=self.active;self._super(),self.alphaOptions.alphaEnabled&&(controls=self.controls,alpha=parseInt(100*self._color._alpha),gradient=["rgb("+(gradient=self._color.toRgb()).r+","+gradient.g+","+gradient.b+") 0%","rgba("+gradient.r+","+gradient.g+","+gradient.b+", 0) 100%"],self.picker.closest(".wp-picker-container").find(".wp-color-result"),self.options.color=self._getColor(),controls.stripAlpha.css({background:"linear-gradient(to bottom, "+gradient.join(", ")+"), url("+backgroundImage+")"}),active&&controls.stripAlphaSlider.slider("value",alpha),self._color.error||self.element.removeClass("iris-error").val(self.options.color),self.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){var color=$(this).data("color");self.alphaOptions.alphaReset&&(self._color._alpha=1,color=self._getColor()),self._setOption("color",color)}))},_paintDimension:function(origin,control){var color=!1;this.alphaOptions.alphaEnabled&&"strip"===control&&(color=this._color,this._color=new Color(color.toString()),this.hue=this._color.h()),this._super(origin,control),color&&(this._color=color)},_setOption:function(key,value){if("color"!==key||!this.alphaOptions.alphaEnabled)return this._super(key,value);value=""+value,newColor=new Color(value).setHSpace(this.options.mode),newColor.error||this._getColor(newColor)===this._getColor()||(this._color=newColor,this.options.color=this._getColor(),this.active="external",this._change())},color:function(newColor){return!0===newColor?this._color.clone():void 0===newColor?this._getColor():void this.option("color",newColor)}}),$.widget("wp.wpColorPicker",$.wp.wpColorPicker,{alphaOptions:{alphaEnabled:!1},_getAlphaOptions:function(){var el=this.element,type=el.data("type")||this.options.type,color=el.data("defaultColor")||el.val(),options={alphaEnabled:el.data("alphaEnabled")||!1,alphaCustomWidth:130,alphaReset:!1,alphaColorType:"rgb",alphaColorWithSpace:!1};return options.alphaEnabled&&(options.alphaEnabled=el.is("input")&&"full"===type),options.alphaEnabled&&(options.alphaColorWithSpace=color&&color.match(/\s/),$.each(options,function(name,defaultValue){var value=el.data(name)||defaultValue;switch(name){case"alphaCustomWidth":value=value?parseInt(value,10):0,value=isNaN(value)?defaultValue:value;break;case"alphaColorType":value.match(/^(hex|(rgb|hsl)a?)$/)||(value=color&&color.match(/^#/)?"hex":color&&color.match(/^hsla?/)?"hsl":defaultValue);break;default:value=!!value}options[name]=value})),options},_create:function(){$.support.iris&&(this.alphaOptions=this._getAlphaOptions(),this._super())},_addListeners:function(){if(!this.alphaOptions.alphaEnabled)return this._super();var self=this,el=self.element,isDeprecated=self.toggler.is("a"),id=self.element.attr("id");self.element.attr("id",null),self.toggler.attr("id",id),this.alphaOptions.defaultWidth=el.width(),this.alphaOptions.alphaCustomWidth&&el.width(parseInt(this.alphaOptions.defaultWidth+this.alphaOptions.alphaCustomWidth,10)),self.toggler.css({position:"relative","background-image":"url("+backgroundImage+")"}),isDeprecated?self.toggler.html('<span class="color-alpha" />'):self.toggler.append('<span class="color-alpha" />'),self.colorAlpha=self.toggler.find("span.color-alpha").css({width:"30px",height:"100%",position:"absolute",top:0,"background-color":el.val()}),"ltr"===self.colorAlpha.css("direction")?self.colorAlpha.css({"border-bottom-left-radius":"2px","border-top-left-radius":"2px",left:0}):self.colorAlpha.css({"border-bottom-right-radius":"2px","border-top-right-radius":"2px",right:0}),el.iris({change:function(event,ui){self.colorAlpha.css({"background-color":ui.color.to_s(self.alphaOptions.alphaColorType)}),$.isFunction(self.options.change)&&self.options.change.call(this,event,ui)}}),self.wrap.on("click.wpcolorpicker",function(event){event.stopPropagation()}),self.toggler.on("click",function(){self.toggler.hasClass("wp-picker-open")?self.close():self.open()}),el.change(function(event){var val=$(this).val();(el.hasClass("iris-error")||""===val||val.match(/^(#|(rgb|hsl)a?)$/))&&(isDeprecated&&self.toggler.removeAttr("style"),self.colorAlpha.css("background-color",""),$.isFunction(self.options.clear)&&self.options.clear.call(this,event))}),self.button.on("click",function(event){$(this).hasClass("wp-picker-default")?el.val(self.options.defaultColor).change():$(this).hasClass("wp-picker-clear")&&(el.val(""),isDeprecated&&self.toggler.removeAttr("style"),self.colorAlpha.css("background-color",""),$.isFunction(self.options.clear)&&self.options.clear.call(this,event),el.trigger("change"))})}}))}(jQuery),jQuery(function(){jQuery(".color-picker").wpColorPicker()});